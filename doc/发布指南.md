# GitHub 发布版本指南

## 📦 发布第一个版本

### 步骤 1：更新版本号

根据功能更新情况，更新 `package.json` 中的版本号：

```json
{
  "version": "1.1.0"  // 主版本.次版本.修订版本
}
```

**版本号规则：**
- **主版本号（Major）**：不兼容的 API 修改
- **次版本号（Minor）**：向下兼容的功能性新增（如新增搜索功能）
- **修订版本号（Patch）**：向下兼容的问题修正

**当前建议版本：** `1.1.0`（因为新增了搜索跳转功能）

### 步骤 2：创建 CHANGELOG.md（可选但推荐）

创建 `CHANGELOG.md` 文件记录版本更新：

```markdown
# 更新日志

## [1.1.0] - 2024-XX-XX

### 新增功能
- ✅ 搜索跳转功能
  - 支持搜索内容并跳转到匹配位置
  - 支持多匹配结果选择
  - 自动显示真实内容
  - 智能页面定位

### 优化改进
- ✅ 优化快捷键行为
  - 显示迷惑信息时，上下页快捷键执行原有功能（移动光标）
  - 显示真实内容时，上下页快捷键执行翻页功能
  - 不干扰正常的编辑操作

## [1.0.0] - 2024-XX-XX

### 初始版本
- ✅ 基础功能
  - 文件读取和显示
  - 显示模式切换
  - 分页阅读
  - 多文件支持
  - 阅读缓存
  - 文件自动监听
```

### 步骤 3：提交更改

确保所有更改已提交到 Git：

```bash
# 检查状态
git status

# 如果有未提交的更改，先提交
git add .
git commit -m "chore: 更新版本号到 1.1.0 并添加 CHANGELOG"

# 推送到 GitHub
git push origin main
```

### 步骤 4：创建 Git 标签（Tag）

#### 方式一：使用命令行创建标签

```bash
# 创建带注释的标签（推荐）
git tag -a v1.1.0 -m "版本 1.1.0: 新增搜索跳转功能"

# 或者创建轻量级标签
git tag v1.1.0
```

**标签命名建议：**
- 使用 `v` 前缀：`v1.1.0`
- 与 `package.json` 中的版本号保持一致

#### 方式二：在 GitHub 上创建标签

1. 访问 GitHub 仓库页面
2. 点击右侧的 "Releases"
3. 点击 "Create a new release"
4. 填写标签名称（如 `v1.1.0`）
5. 选择目标分支（通常是 `main`）
6. 填写 Release 标题和描述
7. 点击 "Publish release"

### 步骤 5：推送标签到 GitHub

如果使用命令行创建了标签，需要推送到 GitHub：

```bash
# 推送单个标签
git push origin v1.1.0

# 或者推送所有标签
git push origin --tags
```

### 步骤 6：在 GitHub 上创建 Release

#### 方法一：通过 GitHub Web 界面创建（推荐）

1. **访问仓库页面**
   - 打开 `https://github.com/Muliminty/ControlBarReading`

2. **进入 Releases 页面**
   - 点击右侧的 "Releases" 链接
   - 或访问：`https://github.com/Muliminty/ControlBarReading/releases`

3. **创建新 Release**
   - 点击 "Create a new release" 按钮

4. **填写 Release 信息**
   - **Choose a tag**: 选择或创建标签（如 `v1.1.0`）
   - **Target**: 选择分支（通常是 `main`）
   - **Release title**: 填写标题（如 `v1.1.0 - 搜索跳转功能`）
   - **Describe this release**: 填写详细描述

5. **Release 描述模板**

```markdown
## 🎉 版本 1.1.0 发布

### ✨ 新增功能

#### 搜索跳转功能
- 🔍 支持搜索内容并跳转到匹配位置
- 📋 支持多匹配结果选择
- 🎯 自动显示真实内容
- 📄 智能页面定位

### 🚀 优化改进

#### 快捷键行为优化
- ⌨️ 显示迷惑信息时，上下页快捷键执行原有功能（移动光标）
- ⌨️ 显示真实内容时，上下页快捷键执行翻页功能
- ✨ 不干扰正常的编辑操作

### 📝 使用说明

详细使用文档请查看：[详细使用文档.md](./详细使用文档.md)

### 🔧 安装方式

#### 从源码安装
```bash
npm install
npm run compile
```

#### 打包安装
```bash
npm install -g @vscode/vsce
npm run package
```

然后安装生成的 `.vsix` 文件。

### 📦 文件下载

- 源代码：下载 ZIP 文件或克隆仓库
- VSIX 包：运行 `npm run package` 生成

### 🐛 问题反馈

如遇到问题，请提交 Issue 或 Pull Request。
```

6. **附加文件（可选）**
   - 可以上传编译后的 `.vsix` 文件作为附件
   - 或提供源代码 ZIP 文件

7. **发布选项**
   - **Set as the latest release**: 设置为最新版本（推荐）
   - **Set as a pre-release**: 设置为预发布版本（测试版）

8. **发布**
   - 点击 "Publish release" 按钮

#### 方法二：使用 GitHub CLI（gh）

如果安装了 GitHub CLI：

```bash
# 创建 Release
gh release create v1.1.0 \
  --title "v1.1.0 - 搜索跳转功能" \
  --notes "## 🎉 版本 1.1.0 发布

### ✨ 新增功能
- 搜索跳转功能
- 快捷键行为优化

详细使用文档请查看：[详细使用文档.md](./详细使用文档.md)" \
  --target main
```

### 步骤 7：验证发布

1. **检查 Release 页面**
   - 访问：`https://github.com/Muliminty/ControlBarReading/releases`
   - 确认 Release 已创建

2. **检查标签**
   - 在仓库页面点击 "Tags" 查看所有标签
   - 确认标签已创建

3. **测试下载**
   - 尝试下载 Release 中的文件（如果有）
   - 验证链接是否正常

## 📋 发布检查清单

发布前请确认：

- [ ] 版本号已更新（`package.json`）
- [ ] 所有功能已测试
- [ ] 代码已提交并推送到 GitHub
- [ ] CHANGELOG.md 已更新（可选）
- [ ] README.md 已更新（如有需要）
- [ ] 使用文档已更新
- [ ] Git 标签已创建
- [ ] Release 描述已填写
- [ ] 附件文件已准备（如有）

## 🔄 后续版本发布

后续版本的发布流程相同：

1. 更新版本号
2. 更新 CHANGELOG.md
3. 提交更改
4. 创建新标签
5. 创建新 Release

**版本号建议：**
- 小功能更新：`1.1.0` → `1.2.0`
- Bug 修复：`1.1.0` → `1.1.1`
- 重大更新：`1.1.0` → `2.0.0`

## 📝 Release 描述模板

### 完整模板

```markdown
## 🎉 版本 X.X.X 发布

### ✨ 新增功能
- 功能描述 1
- 功能描述 2

### 🚀 优化改进
- 优化描述 1
- 优化描述 2

### 🐛 Bug 修复
- 修复描述 1
- 修复描述 2

### 📝 使用说明
详细使用文档请查看：[详细使用文档.md](./详细使用文档.md)

### 🔧 安装方式
[安装说明]

### 📦 文件下载
[下载链接或说明]

### 🐛 问题反馈
如遇到问题，请提交 Issue 或 Pull Request。
```

### 简洁模板

```markdown
## 版本 X.X.X

### 主要更新
- 新增功能
- 优化改进
- Bug 修复

详细更新日志请查看：[CHANGELOG.md](./CHANGELOG.md)
```

## 🎯 快速发布命令

### 一键发布脚本（可选）

创建 `scripts/release.sh`：

```bash
#!/bin/bash

# 获取版本号
VERSION=$(node -p "require('./package.json').version")

# 创建标签
git tag -a "v${VERSION}" -m "版本 ${VERSION}"

# 推送标签
git push origin "v${VERSION}"

echo "✅ 标签 v${VERSION} 已创建并推送"
echo "📝 请在 GitHub 上创建 Release: https://github.com/Muliminty/ControlBarReading/releases/new"
```

使用：
```bash
chmod +x scripts/release.sh
./scripts/release.sh
```

## 📚 相关资源

- [Git 标签文档](https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE)
- [GitHub Releases 文档](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository)
- [语义化版本](https://semver.org/lang/zh-CN/)

---

**祝发布顺利！** 🚀

