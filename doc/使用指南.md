# 使用指南

## 🚀 快速开始

### 第一步：运行插件

如果你已经编译好了代码（`out/extension.js` 已存在），可以直接运行：

1. **按 `F5` 键**，或者
2. **点击 VS Code 左侧的"运行和调试"图标**，然后点击"运行扩展"

这会打开一个新的 VS Code 窗口（扩展开发宿主窗口），插件会自动激活。

### 第二步：查看效果

在新打开的 VS Code 窗口中：

1. **查看状态栏**（窗口底部右侧）
   - 你会看到一个圆圈图标 `○`（默认图标）
   - 这就是插件创建的状态栏项

2. **默认显示模式**
   - 默认显示迷惑性文案（如 "Ln 1, Col 1"、"UTF-8" 等）
   - 这是为了保持隐蔽性

3. **切换显示模式**
   - 按 `Ctrl+Shift+T`（Mac: `Cmd+Shift+T`）切换显示真实内容
   - 再次按可切换回迷惑内容

4. **查看完整内容**
   - 点击状态栏图标
   - 会在输出面板显示完整内容
   - 同时弹出提示信息

## 📝 配置文件

### 方式一：JSON 配置文件（推荐）

在工作区根目录创建 `secret-status-bar.config.json` 文件：

```json
{
  "filePath": "${workspaceFolder}/secret.txt",
  "files": [
    "${workspaceFolder}/secret.txt",
    "${workspaceFolder}/another-secret.txt"
  ],
  "enableEncryption": false,
  "enableClickDialog": true,
  "icon": "$(circle-outline)",
  "maxDisplayLength": 50,
  "pageSize": 50,
  "enableCache": true,
  "showPageInfo": false
}
```

**优点：**
- 配置集中在一个文件中
- 可以版本控制
- 优先级高于 VS Code 设置

### 方式二：VS Code 设置

在工作区的 `.vscode/settings.json` 中添加：

```json
{
  "secretStatusBar.filePath": "${workspaceFolder}/secret.txt",
  "secretStatusBar.files": [
    "${workspaceFolder}/secret.txt",
    "${workspaceFolder}/another-secret.txt"
  ],
  "secretStatusBar.enableEncryption": false,
  "secretStatusBar.enableClickDialog": true,
  "secretStatusBar.icon": "$(circle-outline)",
  "secretStatusBar.maxDisplayLength": 50,
  "secretStatusBar.pageSize": 50,
  "secretStatusBar.enableCache": true,
  "secretStatusBar.showPageInfo": false
}
```

**配置优先级：** JSON 配置文件 > VS Code 设置

## ⚙️ 配置选项详解

### 文件路径配置

#### 单个文件

```json
{
  "filePath": "${workspaceFolder}/secret.txt"
}
```

#### 多个文件（支持切换）

```json
{
  "files": [
    "${workspaceFolder}/secret.txt",
    "${workspaceFolder}/file2.txt",
    "${workspaceFolder}/file3.txt"
  ]
}
```

**支持的变量：**
- `${workspaceFolder}` - 工作区根目录

**路径格式：**
- 相对路径：`${workspaceFolder}/secret.txt`
- 绝对路径：`/完整/路径/secret.txt`

### 显示配置

#### 状态栏图标

```json
{
  "icon": "$(circle-outline)"
}
```

常用图标：
- `$(circle-outline)` - 圆圈轮廓（默认）
- `$(blank)` - 空白（最隐蔽）
- `$(eye)` - 眼睛
- `$(lock)` - 锁
- `$(key)` - 钥匙
- `$(shield)` - 盾牌

#### 最大显示长度

```json
{
  "maxDisplayLength": 50
}
```

超过此长度的内容会被截断，显示 `...`

#### 页码显示

```json
{
  "showPageInfo": true
}
```

启用后，状态栏会显示页码信息，如：`内容... [1/5]`

### 分页配置

#### 每页字符数

```json
{
  "pageSize": 50
}
```

设置每页显示的字符数，用于分页功能。

#### 阅读缓存

```json
{
  "enableCache": true
}
```

启用后，插件会记住每个文件的阅读位置，下次打开时自动定位到上次阅读的位置。

### 功能配置

#### 点击对话框

```json
{
  "enableClickDialog": true
}
```

启用后，点击状态栏图标时会在输出面板显示完整内容。

#### Base64 加密

```json
{
  "enableEncryption": true
}
```

启用后，插件会尝试将文件内容作为 Base64 编码进行解码。

**使用步骤：**
1. 将文本内容进行 Base64 编码
2. 将编码后的内容保存到文件
3. 启用此选项
4. 插件会自动解码显示

## 🎯 常用命令

按 `Ctrl+Shift+P`（Mac: `Cmd+Shift+P`）打开命令面板，输入 `控制栏阅读:` 可查看所有命令。

### 文件操作

#### 显示隐藏内容
```
控制栏阅读: 显示隐藏内容
```
- 在输出面板显示完整内容
- 或直接点击状态栏图标

#### 重新加载文件
```
控制栏阅读: 重新加载文件
```
- 手动重新加载文件
- 当文件更新后状态栏没有自动刷新时使用

#### 配置文件路径
```
控制栏阅读: 配置文件路径
```
- 交互式配置文件路径
- 支持文件选择器或手动输入

#### 选择文件
```
控制栏阅读: 选择文件
```
- 直接打开文件选择器
- 快速选择文件

#### 切换文件
```
控制栏阅读: 切换文件
```
- 切换到下一个文件（多文件模式）
- 循环切换

### 分页操作

#### 上一页
```
控制栏阅读: 上一页
```
- 切换到上一页
- **注意：** 只有在显示真实内容时才能切换页码

#### 下一页
```
控制栏阅读: 下一页
```
- 切换到下一页
- **注意：** 只有在显示真实内容时才能切换页码

### 显示模式

#### 切换显示模式
```
控制栏阅读: 切换显示模式（Ctrl+Shift+T）
```
- 切换真实内容 ↔ 迷惑内容
- 默认快捷键：`Ctrl+Shift+T`（Mac: `Cmd+Shift+T`）

#### 显示真实内容
```
控制栏阅读: 显示真实内容
```
- 强制显示真实内容

#### 显示迷惑内容
```
控制栏阅读: 显示迷惑内容
```
- 强制显示迷惑内容

### 设置相关

#### 打开设置界面
```
控制栏阅读: 打开设置界面
```
- 打开可视化设置界面
- 图形化配置所有选项

#### 配置快捷键
```
控制栏阅读: 配置快捷键
```
- 快速配置快捷键
- 引导到 VS Code 快捷键设置

## ⌨️ 快捷键使用

### 默认快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+Shift+T`<br>(Mac: `Cmd+Shift+T`) | 切换显示模式 | 在真实内容和迷惑内容之间切换 |
| `Ctrl+Up`<br>(Mac: `Cmd+Up`) | 上一页 | 仅在显示真实内容时有效 |
| `Ctrl+Down`<br>(Mac: `Cmd+Down`) | 下一页 | 仅在显示真实内容时有效 |

### 使用流程

1. **查看真实内容**
   - 按 `Ctrl+Shift+T` 显示真实内容
   - 状态栏会显示文件内容

2. **切换页码**
   - 在显示真实内容时
   - 按 `Ctrl+Up` 上一页
   - 按 `Ctrl+Down` 下一页

3. **恢复隐蔽模式**
   - 再次按 `Ctrl+Shift+T` 切换回迷惑内容
   - 或使用命令 `控制栏阅读: 显示迷惑内容`

### 自定义快捷键

1. 使用命令 `控制栏阅读: 配置快捷键`
2. 选择要配置的快捷键
3. 在 VS Code 快捷键设置中配置

## 💡 使用技巧

### 技巧 1：查看完整内容

对于长文本文件：

1. **Tooltip 显示**：只显示摘要（前 50 个字符，可配置）
2. **点击图标**：在输出面板查看完整内容
3. **输出面板**：可以搜索、复制内容

### 技巧 2：最隐蔽模式

如果想更隐蔽：

1. **设置空白图标**
```json
{
  "secretStatusBar.icon": "$(blank)"
}
```

2. **默认显示迷惑内容**
   - 默认就是迷惑内容模式
   - 只有按快捷键才显示真实内容

3. **禁用点击对话框**
```json
{
  "secretStatusBar.enableClickDialog": false
}
```

### 技巧 3：使用加密

如果文件内容是 Base64 编码的：

1. 在设置中启用 `secretStatusBar.enableEncryption: true`
2. 将 Base64 编码的内容保存到文件
3. 插件会自动解码显示

**Base64 编码示例：**
```bash
# 使用命令行工具编码
echo "这是秘密" | base64
# 输出：6L+Z5piv5Yqg5LiL
```

### 技巧 4：多文件管理

配置多个文件，快速切换：

1. **配置文件列表**
```json
{
  "secretStatusBar.files": [
    "${workspaceFolder}/file1.txt",
    "${workspaceFolder}/file2.txt",
    "${workspaceFolder}/file3.txt"
  ]
}
```

2. **切换文件**
   - 使用命令 `控制栏阅读: 切换文件`
   - 循环切换所有文件

3. **阅读缓存**
   - 每个文件的阅读位置独立保存
   - 切换文件后会自动定位到上次阅读的位置

### 技巧 5：分页阅读

对于超长文本：

1. **设置每页字符数**
```json
{
  "secretStatusBar.pageSize": 50
}
```

2. **显示页码信息**
```json
{
  "secretStatusBar.showPageInfo": true
}
```

3. **切换页码**
   - 先按 `Ctrl+Shift+T` 显示真实内容
   - 然后按 `Ctrl+Up` / `Ctrl+Down` 切换页码

## 🔄 文件监听

插件会自动监听文件的变化：

- ✅ **文件修改**：保存后自动更新状态栏
- ✅ **文件创建**：自动加载新文件
- ⚠️ **文件删除**：显示警告信息

**注意：**
- 文件必须保存后才会触发更新
- 如果自动更新失败，使用命令 `控制栏阅读: 重新加载文件`

## 🐛 故障排除

### 问题 1：状态栏没有显示图标

**可能原因：**
1. 文件路径配置错误
2. 文件不存在
3. 路径变量未替换（如 `${workspaceFolder}`）

**解决方案：**
1. 检查文件路径是否正确
2. 确认文件是否存在
3. 查看输出面板（选择 "控制栏阅读" 通道）的错误信息
4. 使用命令 `控制栏阅读: 重新加载文件`
5. 检查 `.vscode/settings.json` 或 `secret-status-bar.config.json` 中的路径配置

### 问题 2：文件更新后没有刷新

**可能原因：**
1. 文件未保存
2. 文件监听器未正常工作
3. 配置文件路径变化

**解决方案：**
1. 确保文件已保存（`Ctrl+S`）
2. 手动触发：`控制栏阅读: 重新加载文件`
3. 检查文件监听器是否正常工作
4. 重启 VS Code

### 问题 3：内容显示不完整

**说明：**
- 状态栏中只显示摘要（前 50 字符，可配置）
- 完整内容需要点击图标在输出面板查看
- 这是为了保持"隐蔽性"的设计

**解决方案：**
1. 点击状态栏图标查看完整内容
2. 调整 `maxDisplayLength` 配置（最大 200）
3. 使用分页功能阅读长文本

### 问题 4：无法切换页码

**可能原因：**
- 当前显示的是迷惑内容，不是真实内容

**解决方案：**
1. 先按 `Ctrl+Shift+T` 显示真实内容
2. 然后按 `Ctrl+Up` / `Ctrl+Down` 切换页码
3. 只有在显示真实内容时才能切换页码

### 问题 5：快捷键不生效

**可能原因：**
1. 快捷键被其他插件占用
2. 快捷键配置错误

**解决方案：**
1. 使用命令 `控制栏阅读: 配置快捷键` 检查配置
2. 在 VS Code 快捷键设置中查看冲突
3. 重新配置快捷键

### 问题 6：配置文件不生效

**可能原因：**
1. JSON 配置文件格式错误
2. 配置文件路径错误
3. VS Code 设置优先级问题

**解决方案：**
1. 检查 JSON 配置文件格式是否正确
2. 确认配置文件在工作区根目录
3. 记住：JSON 配置文件优先级高于 VS Code 设置
4. 使用命令 `控制栏阅读: 打开设置界面` 查看当前配置

## 📦 打包安装

如果想在其他 VS Code 中安装这个插件：

### 步骤 1：安装打包工具

```bash
npm install -g @vscode/vsce
```

### 步骤 2：打包插件

```bash
npm run package
```

这会生成一个 `.vsix` 文件。

### 步骤 3：安装 VSIX

1. 在 VS Code 中按 `Ctrl+Shift+P`（Mac: `Cmd+Shift+P`）
2. 输入 `Extensions: Install from VSIX...`
3. 选择生成的 `.vsix` 文件
4. 重启 VS Code

## 🎨 界面说明

```
┌─────────────────────────────────────────┐
│  VS Code 窗口                           │
│                                         │
│  [编辑器区域]                            │
│                                         │
│                                         │
├─────────────────────────────────────────┤
│  状态栏:  ○  ← 这是插件图标（点击查看）  │
└─────────────────────────────────────────┘
```

- **默认显示**：迷惑性文案（如 "Ln 1, Col 1"）
- **切换后**：真实内容（按 `Ctrl+Shift+T`）
- **点击图标**：在输出面板显示完整内容

---

**现在就开始使用吧！按 `F5` 运行插件，在新窗口中查看效果！** 🎉
